import{b as M,c as T,d as k}from"./chunk-RJZLBNO3.js";import{f as P,i as y}from"./chunk-KD3A3K6R.js";import{Aa as w,Fa as m,Ga as i,Ha as c,Ia as _,Ja as b,Ka as f,La as g,Ma as u,Na as v,Oa as O,Pa as a,Qa as s,Y as p,Z as d,ja as C,na as I,oa as n,sa as h,wa as x}from"./chunk-IKG6YUVS.js";function S(e,o){if(e&1){let t=b();i(0,"button",2),f("click",function(){p(t);let r=g();return d(r.installPWA())}),u(1),a(2,"translate"),c()}e&2&&(n(),O(" ",s(2,1,"INSTALL_BUTTON"),`
`))}function E(e,o){if(e&1){let t=b();i(0,"div",3),f("click",function(){p(t);let r=g();return d(r.closeOverlay())}),i(1,"div",4),f("click",function(r){return p(t),d(r.stopPropagation())}),_(2,"div",5),i(3,"h3"),u(4),a(5,"translate"),c(),i(6,"p"),u(7),a(8,"translate"),c(),i(9,"ol"),_(10,"li",6),a(11,"translate"),_(12,"li",6),a(13,"translate"),c(),i(14,"button",7),f("click",function(){p(t);let r=g();return d(r.closeOverlay())}),u(15),a(16,"translate"),c()()()}e&2&&(n(4),v(s(5,5,"IOS_OVERLAY.TITLE")),n(3),v(s(8,7,"IOS_OVERLAY.INSTRUCTIONS")),n(3),m("innerHTML",s(11,9,"IOS_OVERLAY.STEP1"),I),n(2),m("innerHTML",s(13,11,"IOS_OVERLAY.STEP2"),I),n(3),O(" ",s(16,13,"IOS_OVERLAY.CLOSE")," "))}var B=class e{constructor(o,t){this.platformId=o;this.translate=t}title="barber-shop";deferredPrompt;showInstallButton=!1;showIosInstallOverlay=!1;ngOnInit(){this.translate.use(navigator.language.startsWith("en")?"en":"it"),y(this.platformId)&&(this.isIos()&&!this.isInStandaloneMode()?this.showInstallButton=!0:window.addEventListener("beforeinstallprompt",o=>{o.preventDefault(),this.deferredPrompt=o,this.showInstallButton=!0}))}isIos(){return/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase())}isInStandaloneMode(){return"standalone"in window.navigator&&!!window.navigator.standalone}installPWA(){this.isIos()?this.showIosInstallOverlay=!0:this.deferredPrompt&&(this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(()=>{this.deferredPrompt=null,this.showInstallButton=!1}))}closeOverlay(){this.showIosInstallOverlay=!1}static \u0275fac=function(t){return new(t||e)(h(C),h(M))};static \u0275cmp=x({type:e,selectors:[["app-install-button"]],decls:2,vars:2,consts:[["class","install-btn",3,"click",4,"ngIf"],["class","ios-overlay",3,"click",4,"ngIf"],[1,"install-btn",3,"click"],[1,"ios-overlay",3,"click"],["tabindex","0",1,"ios-sheet",3,"click"],[1,"handle"],[3,"innerHTML"],[3,"click"]],template:function(t,l){t&1&&w(0,S,3,3,"button",0)(1,E,17,15,"div",1),t&2&&(m("ngIf",l.showInstallButton),n(),m("ngIf",l.showIosInstallOverlay))},dependencies:[k,T,P],styles:[".install-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:1rem;font-size:1rem;background-color:#111;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 14px #00000026}.ios-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#0006;display:flex;justify-content:center;align-items:flex-end;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .3s ease}.ios-sheet[_ngcontent-%COMP%]{background:#fffffff2;border-radius:2rem 2rem 0 0;padding:1.5rem;width:100%;max-width:500px;box-shadow:0 -10px 30px #0003;animation:_ngcontent-%COMP%_slideUp .35s ease;text-align:center}.handle[_ngcontent-%COMP%]{width:40px;height:5px;background:#ccc;border-radius:5px;margin:0 auto 1rem}.ios-sheet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.5rem}.ios-sheet[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .ios-sheet[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{font-size:.95rem;color:#333;text-align:left;margin-bottom:1rem}.ios-sheet[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style:decimal inside}.ios-sheet[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.1rem;vertical-align:middle}.ios-sheet[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#222;color:#fff;border:none;padding:.6rem 1.2rem;border-radius:1rem;font-size:.95rem;cursor:pointer;margin-top:1rem;width:100%}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}"]})};export{B as InstallButtonComponent};
